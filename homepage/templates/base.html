<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous">
    </script>
    {% load bootstrap3 %}
    {% bootstrap_css %}
    {% bootstrap_javascript %}
    <link href="/static/css/bootstrap-treeview.css" rel="stylesheet">
    <script src="/static/js/bootstrap-treeview.js"></script>
    <title>测试质量平台</title>
</head>
<body role="document">
<!--导航栏-->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container">
        <div class="navbar-header">
            <a class="navbar-brand" href="/index/">质量管理平台</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-right navbar-nav">
                <li><a href="#">{{ user }}</a> </li>
                <li><a href="/logout/">退出</a> </li>
            </ul>
        </div>
    </div>
</nav>
<!--功能列表-->
<div>
    <ol class="breadcrumb" style="position: fixed; padding-left: 200px; top: 51px; width: 100%;">
        <li><a href="/index/">首页</a></li>
        {% block breadcrumb_button %}
        {% endblock %}
    </ol>
</div>
<div style="background-color: azure; height: 100%; width: 300px; position: fixed; overflow-y: scroll; top: 88px">
    <div id="tree"></div>
</div>
<style>
    html,body{
        height: 100%;
    }
    .right-div{
        padding-left: 300px;
        width: 100%;
        height: 100%;
        overflow-y: scroll;
        top:88px;
        position: fixed;
    }
</style>
<!--<div class="right-div">-->
    <!--{% block content %}-->
    <!--{% endblock %}-->
<!--</div>-->
<script>
    function getTree() {
        var data = [
          {
            text:"接口测试",
            nodes: [
              {
                text:"Child 1",
                nodes: [
                  {
                    text:"Grandchild 1"
                  },
                  {
                    text:"Grandchild 2"
                  }
                ]
              },
              {
                text:"Child 2"
              }
            ]
          },
          {
            text:"web测试",
              href: "http://127.0.0.1:8000/web/webhome",
              nodes: [{text: "项目管理", href: "/web/webprojectlist"},
                     {text: "PO管理", href: "/web/webpageobjecthome"},
                     { text: "测试用例", href: "/web/webcasehome"},
                     { text: "全局控件", href: "/web/webglobalcontrolhome"}]
          },
          {
            text:"Parent 3"
          },
          {
            text:"Parent 4"
          },
          {
            text:"Parent 5"
          }
        ];
        return data;
    }
    $('#tree').treeview({data: getTree(),levels: 1, })
    $('#tree').on('nodeSelected', function (event, data) {
        location.href = data.href
    })

    $('#tree').on('nodeExpanded', function (event, data) {
        console.log(data)
        console.log(data.nodeId)
    })
   //  var a = $('#tree').treeview('getCollapsed', 0);
   // console.log(a)
</script>
{% if messages %}
<script>
    {% for msg in messages %}
        alert('{{ msg.message }}');
    {% endfor %}
</script>
{% endif %}
</body>
</html>
